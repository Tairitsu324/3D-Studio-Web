<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lucid Dream</title>

  <style>
    :root{--bg:#000000;--card:#000000;--muted:#9aa4b2;--accent:#ff4d6d}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#000000 0%, #071f2b 100%);font-family:Inter,ui-sans-serif,system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial}
    .app{max-width:1100px;margin:28px auto;padding:20px;display:grid;grid-template-columns:1fr 360px;gap:20px}
    .player-card{background:rgba(10, 10, 10, 0.03);border-radius:12px;padding:16px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
    .video-wrapper{position:relative;padding-top:56.25%;border-radius:8px;overflow:hidden;background:#000}
    #player{position:absolute;left:0;top:0;width:100%;height:100%}
    .playlist{display:flex;flex-direction:column;gap:8px;margin-top:12px}
    .track{display:flex;gap:12px;align-items:center;padding:8px;border-radius:8px;cursor:pointer}
    .track:hover{background:rgba(255,255,255,0.02)}
    .track .thumb{width:120px;height:68px;flex-shrink:0;background:#111;border-radius:6px;overflow:hidden}
    .track .meta{color:#dfe7ee}
    .small{font-size:13px;color:var(--muted)}
    .sidebar{display:flex;flex-direction:column;gap:12px}
    .sidebar-card{background:#111;border-radius:12px;padding:16px;color:#dfe7ee;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
    .sidebar-card h3{margin-top:0;color:#fff}
    footer{margin-top:12px;color:var(--muted);font-size:13px}
    @media (max-width:980px){.app{grid-template-columns:1fr;}.sidebar{order:2}}
  </style>
</head>
<body>
  <div class="app">
    <!-- 左侧播放器 -->
    <div class="player-card">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px">
        <div>
          <h2 style="margin:0;color:#fff">Lucid Dream</h2>
          <div class="small">Einar and Sorenh's Studio</div>
        </div>
      </div>

      <div class="video-wrapper" style="margin-top:12px">
        <div id="player"></div>
      </div>

      <div class="small" style="margin-top:10px">now: <span id="nowTitle">loading...</span></div>
      <div class="playlist" id="playlist"></div>
      <footer>This is a video page</footer>
    </div>

    <!-- 右侧介绍区 -->
    <div class="sidebar">
      <div class="sidebar-card">
        <h3>Introduction</h3>
        <p>
          This animation was made by Kevin Wu(Sorenh) and Jingqi Fan(Einar)<br>
          Render: Jingqi Fan | Model: Kevin | Music: Leonard Shang | Text contents: Kevin & Jingqi | Date: August 2, 2025
        </p>
        <p>
          Translation for the Chinese sub: We are all just screening programs; Not even as beautiful as the most common bird; 
          I, and you, will eventually leave this city; The road ahead is over; Even though we're at different paths, but still miss the old times.
        </p>
      </div>
    </div>
  </div>

  <!-- YouTube IFrame API -->
  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    const playlist = [{id:'dFucnisxdQM', title:"Lucid Dream"}];
    let player;

    function createPlayer(){
      player = new YT.Player('player', {
        videoId: playlist[0].id,
        playerVars:{'playsinline':1},
        events:{'onReady': onPlayerReady}
      });
    }

    function onYouTubeIframeAPIReady(){
      createPlayer();
      renderPlaylist();
    }

    function onPlayerReady(){
      document.getElementById('nowTitle').textContent = playlist[0].title;
    }

    function renderPlaylist(){
      const container = document.getElementById('playlist');
      const item = playlist[0];
      container.innerHTML = `
        <div class="track">
          <div class="thumb"><img src="https://img.youtube.com/vi/${item.id}/hqdefault.jpg" style="width:100%;height:100%;object-fit:cover"/></div>
          <div class="meta"><div style="font-weight:600">${item.title}</div><div class="small">ID: ${item.id}</div></div>
        </div>
      `;
    }

    // 用户切换 tab 或滚动回来，彻底重建 iframe
    document.addEventListener('visibilitychange', function() {
      const container = document.getElementById('player');
      if(!document.hidden){
        // 用户返回页面
        container.innerHTML = ''; // 删除旧 iframe
        createPlayer(); // 重新创建 YT.Player
      } else {
        // 用户离开页面，暂停视频
        if(player) player.pauseVideo();
      }
    });
  </script>
</body>
</html>
