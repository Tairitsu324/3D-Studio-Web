<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lucid Dream</title>
  <style>
    :root{--bg:#000000;--card:#000000;--muted:#9aa4b2;--accent:#ff4d6d}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#000000 0%, #071f2b 100%);font-family:Inter,ui-sans-serif,system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial}
    .app{max-width:1100px;margin:28px auto;padding:20px;display:grid;grid-template-columns:1fr 360px;gap:20px}
    .player-card{background:rgba(10, 10, 10, 0.03);border-radius:12px;padding:16px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
    .video-wrapper{position:relative;padding-top:56.25%;border-radius:8px;overflow:hidden;background:#000}
    #player{position:absolute;left:0;top:0;width:100%;height:100%}
    .controls{display:flex;align-items:center;gap:8px;margin-top:12px}
    .btn{background:transparent;border:1px solid rgba(255,255,255,0.08);padding:8px 12px;border-radius:8px;color:#fff;cursor:pointer}
    .seek{flex:1}
    input[type=range]{width:100%}
    .playlist{display:flex;flex-direction:column;gap:8px;margin-top:12px}
    .track{display:flex;gap:12px;align-items:center;padding:8px;border-radius:8px;cursor:pointer}
    .track:hover{background:rgba(255,255,255,0.02)}
    .track .thumb{width:120px;height:68px;flex-shrink:0;background:#111;border-radius:6px;overflow:hidden}
    .track .meta{color:#dfe7ee}
    .small{font-size:13px;color:var(--muted)}
    .sidebar{display:flex;flex-direction:column;gap:12px}
    .sidebar-card{background:#111;border-radius:12px;padding:16px;color:#dfe7ee;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
    .sidebar-card h3{margin-top:0;color:#fff}
    footer{margin-top:12px;color:var(--muted);font-size:13px}
    @media (max-width:980px){.app{grid-template-columns:1fr;}.sidebar{order:2}}
  </style>
</head>
<body>
  <div class="app">
    <!-- 左侧播放器 -->
    <div class="player-card">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px">
        <div>
          <h2 style="margin:0;color:#fff">Lucid Dream</h2>
          <div class="small">Einar and Sorenh's Studio</div>
        </div>
      </div>

      <div class="video-wrapper" style="margin-top:12px">
        <div id="player"></div>
      </div>


      <div class="small" style="margin-top:10px">now: <span id="nowTitle">loading...</span></div>

      <div class="playlist" id="playlist"></div>

      <footer>This is a video page</footer>
    </div>

    <!-- 右侧介绍区 -->
    <div class="sidebar">
      <div class="sidebar-card">
        <h3>Introduction</h3>
        <p>
          This animation was made by Kevin Wu(Sorenh) and Jingqi Fan(Einar)<br>
          Render: Jingqi Fan | Model: Kevin | Music: Leonard Shang | Text contents: Kevin & Jingqi | Date: August 2, 2025
        </p>
        <p>
          Translation for the Chinese sub: We are all just screening programs; Not even as beautiful as the most common bird; 
          I, and you, will eventually leave this city; The road ahead is over; Even though we're at different paths, but still miss the old times.
        </p>
      </div>
    </div>
  </div>

  <!-- YouTube IFrame API -->
  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    const playlist = [
      {id: 'dFucnisxdQM', title: "Lucid Dream"}
    ];

    let player;
    let isPlaying = false;

    function onYouTubeIframeAPIReady(){
      player = new YT.Player('player', {
        videoId: playlist[0].id,
        playerVars: { 'playsinline': 1 },
        events: {
          'onReady': onPlayerReady,
          'onStateChange': onPlayerStateChange
        }
      });
      renderPlaylist();
    }

    function onPlayerReady(){
      updateNowTitle();
      setInterval(updateSeek, 500);
    }

    function onPlayerStateChange(e){
      if(e.data === YT.PlayerState.PLAYING){
        isPlaying = true;
        document.getElementById('playPauseBtn').textContent = 'Pause';
      } else if(e.data === YT.PlayerState.PAUSED){
        isPlaying = false;
        document.getElementById('playPauseBtn').textContent = 'Play';
      }
    }

    function playPause(){
      if(!player) return;
      const state = player.getPlayerState();
      if(state === YT.PlayerState.PLAYING){ player.pauseVideo(); }
      else { player.playVideo(); }
    }

    function updateNowTitle(){
      document.getElementById('nowTitle').textContent = playlist[0].title;
    }

    function updateSeek(){
      if(!player) return;
      const dur = player.getDuration();
      if(!isFinite(dur) || dur === 0) return;
      const t = player.getCurrentTime();
      const pct = Math.floor((t / dur) * 100);
      document.getElementById('seek').value = pct;
    }

    function seekToPercent(pct){
      if(!player) return;
      const dur = player.getDuration();
      if(!isFinite(dur) || dur === 0) return;
      player.seekTo((pct/100) * dur, true);
    }

    function setVolume(v){ if(player) player.setVolume(v); }
    function toggleMute(){ 
      if(player) { 
        const muted = player.isMuted(); 
        if(muted) player.unMute(); 
        else player.mute(); 
        document.getElementById('muteBtn').textContent = muted ? 'Mute' : 'Unmute'; 
      }
    }

    document.getElementById('playPauseBtn').addEventListener('click', playPause);
    document.getElementById('seek').addEventListener('input', (ev)=>{ seekToPercent(Number(ev.target.value)); });
    document.getElementById('volume').addEventListener('input', (ev)=>{ setVolume(Number(ev.target.value)); });
    document.getElementById('muteBtn').addEventListener('click', toggleMute);
    document.getElementById('fsBtn').addEventListener('click', ()=>{
      const el = document.querySelector('.video-wrapper');
      if(!document.fullscreenElement) el.requestFullscreen().catch(()=>{});
      else document.exitFullscreen();
    });

    function renderPlaylist(){
      const container = document.getElementById('playlist');
      const item = playlist[0];
      container.innerHTML = `
        <div class="track">
          <div class="thumb"><img src="https://img.youtube.com/vi/${item.id}/hqdefault.jpg" style="width:100%;height:100%;object-fit:cover"/></div>
          <div class="meta"><div style="font-weight:600">${item.title}</div><div class="small">ID: ${item.id}</div></div>
        </div>
      `;
    }
  </script>
</body>
</html>
